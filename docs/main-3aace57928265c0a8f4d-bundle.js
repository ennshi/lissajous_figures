(()=>{"use strict";const e=(e,n=null,t=null)=>{const r=document.createElement(e);if(n)for(const e in n)n.hasOwnProperty(e)&&r.setAttribute(e,n[e]);if(t)for(const e of t)r.classList.add(e);return r},n=[{text:"X2",num:.001,next:1},{text:"X4",num:.002,next:2},{text:"X8",num:.004,next:3},{text:"X10",num:.008,next:4},{text:"X1",num:.01,next:0}],t="up",r="down",o={freqX:1,freqY:1,speed:n[0]},i=function(){const e={...o},t=()=>e.freqX,r=()=>e.freqY,i=()=>e.speed;return{upFreqX:()=>(e.freqX<15&&(e.freqX=t()+1),t()),upFreqY:()=>(e.freqY<15&&(e.freqY=r()+1),r()),downFreqX:()=>(e.freqX>1&&(e.freqX=t()-1),t()),downFreqY:()=>(e.freqY>1&&(e.freqY=r()-1),r()),getFreqX:t,getFreqY:r,getSpeed:i,changeSpeed:()=>(e.speed=n[i().next],i())}}(),a=n=>{const o=i[`getFreq${n}`](),a=e("div",null,["freq-controller__container-wrapper"]),l=e("h2");l.innerText=n;const c=e("div",null,["freq-controller__container"]),d=e("span",null,["freq-controller__value"]);d.innerText=o;const u=function(n,o){const a=e("div",null,["freq-controller__btn-container"]),l=s(t),c=s(r);a.append(l,c);const d=e=>{const t=i[`${e}Freq${n}`]();return o.innerText=t,t};return l.addEventListener("click",(()=>{c.disabled&&c.removeAttribute("disabled");15===d(t)&&(l.disabled="disabled")})),c.addEventListener("click",(()=>{l.disabled&&l.removeAttribute("disabled");1===d(r)&&(c.disabled="disabled")})),a}(n,d);return c.append(d,u),a.append(l,c),a};function s(n){const t=e("button",null,["btn--grey","freq-controller__btn"]);return t.innerHTML=`<i class="fas fa-chevron-${n}"></i>`,t}function l(n,t,r){const o=e("button",null,t);return o.innerHTML=n,o.addEventListener("click",r),o}const c="plot",d={x:[],y:[]},u={mode:"lines",hoverinfo:"none",line:{color:"rgb(142, 254, 54)",width:2}},p={mode:"lines",hoverinfo:"none",line:{width:2}},f={xaxis:{range:[-1.1,1.1]},yaxis:{range:[-1.1,1.1]},paper_bgcolor:"rgb(68, 66, 66)",plot_bgcolor:"rgb(68, 66, 66)",margin:{l:5,r:5,b:5,t:5,pad:5},showlegend:!1},h={displayModeBar:!1},m={transition:{duration:0},frame:{duration:0,redraw:!1}},b=function(){const e={data:d,phaseDiff:0,start:!1,reqFrame:null,numPlots:0},n=()=>{Plotly.newPlot(c,[{...d,...u}],f,h)},t=()=>{if(e.start){const n=e.phaseDiff;Object.assign(e,{data:g(n)}),Plotly.animate(c,{data:[{...e.data}]},m),e.phaseDiff=n<2?parseFloat((n+i.getSpeed().num).toFixed(3)):0,e.reqFrame=requestAnimationFrame(t)}},r=()=>{e.start=!1,e.reqFrame=null};return{setDefaultPlot:n,startAnimation:()=>{e.start=!0,t()},stopAnimation:r,getStart:()=>e.start,addPlot:()=>{r(),e.numPlots<15&&(Plotly.plot(c,[{...e.data,...p}],f,h),e.numPlots++)},clearAll:()=>{r(),Object.assign(e,{data:d,phaseDiff:0,numPlots:0}),n()}}}();function g(e){const n=[],t=[];for(let r=0;r<800;r++){const o=.01*r;n[r]=parseFloat((1*Math.sin(i.getFreqX()*o+Math.PI*e)).toFixed(3)),t[r]=parseFloat((1*Math.sin(i.getFreqY()*o)).toFixed(3))}return{x:n,y:t}}const q=function(){const n=document.getElementById("root"),t=document.getElementById("help-block");(()=>{const r=l("X",["btn--transparent","btn--close"],(()=>(t.classList.add("hidden"),void n.classList.remove("hidden")))),o=e("h1");o.innerText="Help";const i=e("div",null,["help__text-container"]);i.innerHTML="<ul>\n    <li>Lissajous figures are plane curves traced by a point which executes two independent harmonic motions in perpendicular directions, the frequencies of the motion being in the ratio of two integers.</li>\n    <li>The mini-project simulates Lissajous figures depending on frequency ratio (no real scientific approach, just drawing). The project is built with JS, plotly.js, webpack.</li>\n    <li>The animation displays transformation of figure depending on the phase difference changing in time.</li>\n    <li>Set frequencies of X and Y motions using arrow buttons.</li>\n    <li>Change speed with the 'X2' button.</li>\n    <li>You can save and compare curves with Save button.</li>\n</ul>",t.append(r,o,i)})();return{show:()=>{n.classList.add("hidden"),t.classList.remove("hidden")}}}(),x=function(){const n=document.getElementById("root");return{render:async()=>{const t=function(){const n=e("section",null,["plot__container"]),t=e("div",{id:c},["plot"]);return n.appendChild(t),n}(),r=function(){const n=e("section",null,["control-panel__container"]),t=function(){const n=e("section",null,["control-panel__inner-container"]),t=function(){const e=l('<i class="fas fa-play"></i>',["btn--green","btn--top"],(()=>{if(b.getStart())return e.innerHTML='<i class="fas fa-play"></i>',b.stopAnimation();e.innerHTML='<i class="fas fa-stop"></i>',b.startAnimation()}));return e}(),r=l(i.getSpeed().text,["btn--green","btn--top"],(()=>r.innerHTML=i.changeSpeed().text)),o=l("?",["btn--grey","btn--top"],(()=>q.show()));return n.append(t,r,o),n}(),r=function(){const n=e("header",null,["control-panel__header"]),t=e("h1");return t.innerText="Lissajous Figures",n.appendChild(t),n}(),o=function(){const n=e("section",null,["control-panel__inner-container"]),t=a("X"),r=a("Y");return n.append(t,r),n}(),s=function(){const n=e("section",null,["control-panel__inner-container"]),t=l("Save",["btn--grey","btn--bottom"],(()=>b.addPlot())),r=l("Clear",["btn--green","btn--bottom"],(()=>b.clearAll()));return n.append(t,r),n}();return n.append(t,r,o,s),n}();await n.append(t,r),b.setDefaultPlot()}}}();({start:()=>{x.render()}}).start()})();